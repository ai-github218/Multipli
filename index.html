<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>掛け算ゲーム</title>
<style>
  body { font-family: sans-serif; text-align: center; margin-top: 50px; }
  #result { font-weight: bold; font-size: 1.2em; margin: 10px 0; }
  #time { font-size: 1.2em; color: blue; }
  input, button { font-size: 1em; padding: 5px; }
</style>
</head>
<body>

<h1>掛け算ゲーム</h1>

<p id="question"></p>

<input type="number" id="answer">
<button onclick="check()" id="answerBtn">答える</button>

<p id="result"></p>
<p>スコア: <span id="score">0</span></p>
<p>残り時間: <span id="time">30</span>秒</p>

<script>
let num1, num2;
let score = 0;
let time = 30; // ゲーム全体の制限時間（秒）
let timer;

// 新しい問題を出す
function newQuestion() {
    num1 = Math.floor(Math.random() * 9) + 1;
    num2 = Math.floor(Math.random() * 9) + 1;
    document.getElementById("question").textContent = num1 + " × " + num2 + " = ?";
    document.getElementById("answer").value = "";
    document.getElementById("answer").focus();
}

// タイマー開始
function startTimer() {
    timer = setInterval(() => {
        time--;
        document.getElementById("time").textContent = time;
        if(time <= 0){
            clearInterval(timer);
            document.getElementById("result").textContent = "⏰ 時間切れ！ゲーム終了";
            document.getElementById("answerBtn").disabled = true;
            document.getElementById("answer").disabled = true;
        }
    }, 1000);
}

// 回答チェック
function check() {
    if(time <= 0) return; // ゲーム終了後は処理しない

    const ans = Number(document.getElementById("answer").value);

    // 回答で残り時間を3秒増やす
    time += 3;
    document.getElementById("time").textContent = time;

    if(ans === num1 * num2){
        score++;
        document.getElementById("result").textContent = "✅ 正解！";
        document.getElementById("result").style.color = "green";
    } else {
        document.getElementById("result").textContent = "❌ 不正解！正解は " + (num1*num2);
        document.getElementById("result").style.color = "red";
    }

    document.getElementById("score").textContent = score;
    newQuestion();
}

// 初期化
newQuestion();
startTimer();
</script>

</body>
</html>
