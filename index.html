<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>掛け算ゲーム</title>
<style>
  body { font-family: sans-serif; text-align: center; margin-top: 50px; }
  #result { font-weight: bold; font-size: 1.2em; margin: 10px 0; }
  #time { font-size: 1.2em; }
</style>
</head>
<body>

<h1>掛け算ゲーム</h1>

<p id="question"></p>

<input type="number" id="answer">
<button onclick="check()">答える</button>

<p id="result"></p>
<p>スコア: <span id="score">0</span></p>
<p>残り時間: <span id="time">10</span>秒</p>

<!-- 効果音 -->
<audio id="correctSound" src="https://www.soundjay.com/button/beep-07.mp3"></audio>
<audio id="wrongSound" src="https://www.soundjay.com/button/beep-10.mp3"></audio>

<script>
let num1, num2;
let score = 0;
let time = 10;
let timer;

function newQuestion() {
    num1 = Math.floor(Math.random() * 9) + 1;
    num2 = Math.floor(Math.random() * 9) + 1;
    document.getElementById("question").textContent = num1 + " × " + num2 + " = ?";
    document.getElementById("answer").value = "";
    document.getElementById("answer").focus();
}

function startTimer() {
    clearInterval(timer); // 既存タイマーをクリア
    time = 10;
    document.getElementById("time").textContent = time;
    timer = setInterval(() => {
        time--;
        document.getElementById("time").textContent = time;
        if(time <= 0){
            clearInterval(timer);
            document.getElementById("result").textContent = "⏰ 時間切れ！正解は " + (num1*num2);
            document.getElementById("wrongSound").play();
            score = 0;
            document.getElementById("score").textContent = score;
            setTimeout(() => newQuestion(), 1000);
            startTimer();
        }
    }, 1000);
}

function check() {
    const ans = Number(document.getElementById("answer").value);
    if(ans === num1 * num2){
        score++;
        document.getElementById("result").textContent = "✅ 正解！";
        document.getElementById("result").style.color = "green";
        document.getElementById("correctSound").play();
    } else {
        document.getElementById("result").textContent = "❌ 不正解！正解は " + (num1*num2);
        document.getElementById("result").style.color = "red";
        document.getElementById("wrongSound").play();
        score = 0;
    }
    document.getElementById("score").textContent = score;
    newQuestion();
    startTimer();
}

// 初期化
newQuestion();
startTimer();
</script>

</body>
</html>
